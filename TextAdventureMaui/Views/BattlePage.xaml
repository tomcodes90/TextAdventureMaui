<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:TextAdventureMaui.Views.Controls"
             x:Class="TextAdventureMaui.Views.BattlePage"
             Title="Battle"
             BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundLight}, Dark={StaticResource BackgroundDark}}">

    <Grid RowDefinitions="*,*,*,*" ColumnDefinitions="*,*">

        <!-- Enemy (Top Left, 1/4 height, 1/2 width) -->
        <controls:BattleCharacterView Grid.Row="0" Grid.Column="0"
                                      Image="maxime.png"
                                      CharacterName="{Binding Enemy.Name}"
                                      HpPercent="{Binding EnemyHpPercent}"
                                      BorderBrush="{StaticResource ActionPrimary}"
                                      BarBrush="{StaticResource ActionPrimary}"
                                      HorizontalOptions="Fill"
                                      VerticalOptions="Fill"/>

        <!-- Player (Bottom Right, 1/4 height, 1/2 width) -->
        <controls:BattleCharacterView Grid.Row="3" Grid.Column="1"
                                      Image="ashita.png"
                                      CharacterName="{Binding Player.Name}"
                                      HpPercent="{Binding PlayerHpPercent}"
                                      BorderBrush="{StaticResource ActionPrimary}"
                                      BarBrush="{StaticResource ActionPrimary}"
                                      HorizontalOptions="Fill"
                                      VerticalOptions="Fill"/>

        <!-- Log / Command Menu (Bottom Left, 1/4 height, 1/2 width) -->
        <Border Grid.Row="3" Grid.Column="0"
                Stroke="{StaticResource Gray500Brush}" StrokeShape="RoundRectangle 0"
                BackgroundColor="{StaticResource Gray900}" Padding="15">
            <Grid>
                <Label Text="{Binding BattleLog}" FontSize="16"
                       HorizontalOptions="Center" VerticalOptions="Center"
                       TextColor="{StaticResource TextPrimary}"
                       LineBreakMode="WordWrap"/>

                <HorizontalStackLayout HorizontalOptions="Center"
                                       VerticalOptions="End" Spacing="15">
                    <Button Text="Attack" Command="{Binding PlayerAttackCommand}" />
                    <Button Text="Item" />
                    <Button Text="Defend" />
                </HorizontalStackLayout>
            </Grid>
        </Border>

        <!-- Middle rows (row 1 + 2, both columns) = battle animation area -->
        <Grid Grid.Row="1" Grid.ColumnSpan="2"/>
        <Grid Grid.Row="2" Grid.ColumnSpan="2"/>
    </Grid>
</ContentPage>
